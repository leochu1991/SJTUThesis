%# -*- coding: utf-8-unix -*-
%%==================================================
%% abstract.tex for SJTU Master Thesis
%%==================================================

\begin{abstract}
在工业领域中，随着计算机通信技术的不断发展，越来越多的分布式系统被应用在了工业现场。而这些分布式系统由于物理范围的不断扩张和越来越多的实时性任务如数据采集、远程控制的需求，使得整个系统对于各个分布式节点的时钟同步精度提出了愈来愈高的要求。

所以，为了应对这些时钟同步需求，工业领域依次出现了不少时钟同步方法。例如GPS同步方法和NTP\footnote{网络时钟同步协议}、SNTP\footnote{简单网络时钟同步协议}等同步协议的出现。不过，由于工业现场中复杂的网络状况、工业时钟设备随环境变化和干扰而稳定性不高，而且网络报文传输中出现的随机时延变化等多种因素的存在，导致了实际同步精度并不理想，只能达到普通的毫秒级别。而GPS同步方法由于价格高昂和国防安全性的缺陷导致其无法长时间大面积应用于工业领域。

因此，在工业系统对时钟同步精度提出的要求越来越高，甚至达到微秒级别甚至亚微秒级别的背景下，IEEE1588精密时钟同步协议应运而生。该协议于2002年由网络精密时钟同步委员会在IEEE标准委员会的支持下提出，并于2008年发布了第二版。这套协议和过去的协议相比，从易部署性、国防安全性和时钟同步精度等多方面有了改进，而且根据协议内容，时钟同步精度能够达到微秒级别甚至更高，因此，本文选IEEE1588协议为核心研究对象。

然而，在实际的工业运行中可以发现，IEEE1588同步协议仍然存在严重的问题。这些问题导致时钟同步精度难以达到理想的微秒级甚至亚微秒级的同步精度，这不仅严重束缚了该协议在工业系统中的应用，也使得更多分布式系统对时钟同步的需求更加迫切。因此，为了充分发挥IEEE1588在工业实际系统中的价值，本文对该协议进行了深入分析，结合工业实际来探究其中破坏时钟同步精度的各种因素，然后在第三章钟创新性地从数学统计角度出发对传输时延进行深入研究，提出“动态阈值法”、“基于固定时间窗的实时监控算法”等统计方法进行优化。以时延抖动为例，由于该因素的随机性和不可预知性，一直以来都很难有很好的应对方案，然后本文从统计角度出发，把时延数据作为样本利用相关的数学方法来进行处理，从而明显提高了时钟同步的精度和稳定度，这也是本文创新点之一。另外，本文第四章先从统计角度出发，分析并提出了关于主从时钟晶振源漂移的补偿方案，还针对透明时钟进行了算法修正，最后将基于实验室搭建的一套stateflow时钟同步仿真系统，通过在该仿真系统上进行了算法验证，结合仿真结果可以看出本文所提算法使得时钟同步精度得到明显的改善。另外，相信本文创新性地从统计角度切入研究所得到研究结果，一定会为后面更多学者提供进一步深入探索的思路和依据。

\keywords{\large 时钟同步 \quad IEEE1588 \quad 统计算法 \quad 频率补偿 \quad 透明时钟 \quad  \quad stateflow}
\end{abstract}

\begin{englishabstract}

In the industrial field, with the continuous growth of computer communication technology, People started to apply more and more distributed system. As the physical scope of these systems are getting wider, and more real-time tasks, like data-collection and remote-control, appear, we have more strict requirement for the clock synchronization accuracy of the whole distributed nodes.

So, for meeting these clock synchronization requirements, serval clock-sync methods appear, such as the GPS synchronization technology、NTP and SNTP protocols. However, due to the complexity of industrial network、bad stability of industrial clock equipments, and the unpredictable message latency during transmitting process, We cannot acheieve ideal synchronization accuracy in reality, even worse the synchronization is only able to reach the normal millisecond level. Moreover, the GPS method is also not able to be applied widely in industrial field bacause of its high-cost and hidden danger of defense security.

With this background, IEEE1588 precise time-synchronization protocol appears for persuing higher clock synchronization accuracy. IEEE1588 protocol is proposed in year 2002 by Network Clock Synchronization Committee, with the support of IEEE Standards Committee, and then promoted as the second version in year 2008. Compared with other previous synchronization methods, IEEE1588 has many improvements, such as the ease of deployment、better defense security and synchronization accuracy. Based on these reasons, I choose IEEE1588 as my reaserach target in this paper.

However, In the industrial reality, we found there are still many problems in IEEE1588 protocol, and these problems lead directly to the unideal clock synchronization accuracy, which not only hamper the development of this protocol, but also make this clock synchronization requirement more strict and urgent. So in order to get the full ability of IEEE1588 in industrial field, I made deep reserach into this protocol, and by exploring deeply those factors which affect the synchronization accuracy, I decided to do more research from the math statistical perspective and finally proposed creatively a set of statistical methods for acheiving improvements, such as dynamic threshold method、real-time monitoring method based on fixed-window and so on. Taking time-letency as example, due to its randomness and unpredictability, We always have no ideal method to handle this. But in my paper, I will start from the statistical thought, and take the time latency data as samples and use several math methods to improve it. From the final simulink results, We can see these methods do improve the accuracy and stability clearly.What's more, In the fourth chapter, I explore the PID clock servo system based on Neural Network, trying to improve the robustness and adaptive for changing and complex industrial environment.

At the last of this paper, I will introduce our own clock synchronization simulink system which is based on stateflow on matlab, and I also did the algorithm validation by this simulink system. From the simulink result we can see those methods, proposed by myself, do improve the accuracy and stablity of clock synchronization system. What's more, I believe my reserach result , which is coming from the perspective of math statistic, will inspire many other scholars and reserachers and provide them some thoughts and scientific basis.

\englishkeywords{\large Clock Synchronization, IEEE1588, statistical method, frenquency compensation, stateflow}
\end{englishabstract}

